import{_ as y,u as O,a as T,b as l,c as i,e as a,w as c,d,T as L,P as B,n as p,q as _,t as f,M as N,x as w,ab as I,L as R}from"./index-561458c6.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{s as S}from"./SimpleHeader-dc6b26c3.js";import{g as U}from"./order-5a5526db.js";const $={class:"order-box"},q={class:"content"},D=["onClick"],M={class:"order-item-header"},E={__name:"Order",setup(F){const m=O(),e=T({status:"",loading:!1,finished:!1,refreshing:!1,list:[],page:1,totalPage:0}),h=async()=>{const{data:s,data:{list:o}}=await U({pageNumber:e.page,status:e.status});e.list=e.list.concat(o),e.totalPage=s.totalPage,e.loading=!1,e.page>=s.totalPage&&(e.finished=!0)},b=({name:s})=>{e.status=s,g()},v=s=>{m.push({path:"/order-detail",query:{id:s}})},u=()=>{!e.refreshing&&e.page<e.totalPage&&(console.log(e.page),console.log(e.totalPage),e.page=e.page+1),e.refreshing&&(e.list=[],e.refreshing=!1),h()},g=()=>{e.refreshing=!0,e.finished=!1,e.loading=!0,e.page=1,u()};return(s,o)=>{const n=w,k=L,x=I,P=R,V=B;return l(),i("div",$,[a(S,{name:"我的订单",back:"/user"}),a(k,{onClickTab:b,color:"#1baeae","title-active-color":"#1baeae",class:"order-tab",modelValue:e.status,"onUpdate:modelValue":o[0]||(o[0]=t=>e.status=t)},{default:c(()=>[a(n,{title:"全部",name:""}),a(n,{title:"待付款",name:"0"}),a(n,{title:"待确认",name:"1"}),a(n,{title:"待发货",name:"2"}),a(n,{title:"已发货",name:"3"}),a(n,{title:"交易完成",name:"4"})]),_:1},8,["modelValue"]),d("div",q,[a(V,{modelValue:e.refreshing,"onUpdate:modelValue":o[2]||(o[2]=t=>e.refreshing=t),onRefresh:g,class:"order-list-refresh"},{default:c(()=>[a(P,{loading:e.loading,"onUpdate:loading":o[1]||(o[1]=t=>e.loading=t),finished:e.finished,"finished-text":"没有更多了",onLoad:u,onOffset:t=>10},{default:c(()=>[(l(!0),i(p,null,_(e.list,(t,C)=>(l(),i("div",{key:C,class:"order-item-box",onClick:r=>v(t.orderNo)},[d("div",M,[d("span",null,"订单时间："+f(t.createTime),1),d("span",null,f(t.orderStatusString),1)]),(l(!0),i(p,null,_(t.newBeeMallOrderItemVOS,r=>(l(),N(x,{key:r.orderId,num:r.goodsCount,price:r.sellingPrice,desc:"全场包邮",title:r.goodsName,thumb:s.$filters.prefix(r.goodsCoverImg)},null,8,["num","price","title","thumb"]))),128))],8,D))),128))]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"])])])}}},Q=y(E,[["__scopeId","data-v-d11e5450"]]);export{Q as default};
