import{_ as P,l as C,u as B,a as I,b as c,c as d,d as t,m as N,v as R,e as n,w as p,T as V,P as S,n as T,q,t as g,p as D,k as U,x as Y,L as $}from"./index-561458c6.js";/* empty css              *//* empty css              */import{s as j}from"./good-62b58d5b.js";const M=i=>(D("data-v-90ec2e09"),i=i(),U(),i),O={class:"product-list-wrap"},Q={class:"product-list-content"},z={class:"category-header wrap"},A={class:"header-search"},E=M(()=>t("i",{class:"nbicon nbSearch"},null,-1)),F={class:"content"},G=["onClick"],H=["src"],K={class:"product-info"},W={class:"name"},J={class:"price"},X={key:1,class:"empty",src:"https://ts1.cn.mm.bing.net/th/id/R-C.261be710ededa54d91c3056614ccd871?rik=WNP%2fkY7xOrUCrQ&riu=http%3a%2f%2fwww.haitaoit.com%2fupload%2f201703%2f03%2f201703030923058869.jpg&ehk=6N1tYdxYivQmHDudGYCKoza37q85VLhyof0lgajmeNM%3d&risl=&pid=ImgRaw&r=0",alt:"搜索"},Z={__name:"ProductList",setup(i){const u=C(),f=B(),e=I({keyword:u.query.keyword||"",searchBtn:!1,seclectActive:!1,refreshing:!1,list:[],loading:!1,finished:!1,productList:[],totalPage:0,page:1,orderBy:""}),h=async()=>{const{categoryId:o}=u.query;if(!o&&!e.keyword){e.finished=!0,e.loading=!1;return}const{data:a,data:{list:r}}=await j({pageNumber:e.page,goodsCategoryId:o,keyword:e.keyword,orderBy:e.orderBy});e.productList=e.productList.concat(r),e.totalPage=a.totalPage,e.loading=!1,e.page>=a.totalPage&&(e.finished=!0)},m=()=>{f.go(-1)},y=o=>{f.push({path:`/product/${o.goodsId}`})},v=()=>{l()},_=()=>{!e.refreshing&&e.page<e.totalPage&&(e.page=e.page+1),e.refreshing&&(e.productList=[],e.refreshing=!1),h()},l=()=>{e.refreshing=!0,e.finished=!1,e.loading=!0,e.page=1,_()},k=({name:o})=>{console.log("name",o),e.orderBy=o,l()};return(o,a)=>{const r=Y,w=V,b=$,L=S;return c(),d("div",O,[t("div",Q,[t("header",z,[t("i",{class:"nbicon nbfanhui",onClick:m}),t("div",A,[E,N(t("input",{type:"text",class:"search-title","onUpdate:modelValue":a[0]||(a[0]=s=>e.keyword=s)},null,512),[[R,e.keyword]])]),t("span",{class:"search-btn",onClick:v},"搜索")]),n(w,{type:"card",color:"#1baeae",onClickTab:k},{default:p(()=>[n(r,{title:"推荐",name:""}),n(r,{title:"价格",name:"price"})]),_:1})]),t("div",F,[n(L,{modelValue:e.refreshing,"onUpdate:modelValue":a[2]||(a[2]=s=>e.refreshing=s),onRefresh:l,class:"product-list-refresh"},{default:p(()=>[n(b,{loading:e.loading,"onUpdate:loading":a[1]||(a[1]=s=>e.loading=s),finished:e.finished,"finished-text":e.productList.length?"没有更多了":"搜索想要的商品",onLoad:_,onOffset:s=>10},{default:p(()=>[e.productList.length?(c(!0),d(T,{key:0},q(e.productList,(s,x)=>(c(),d("div",{class:"product-item",key:x,onClick:ee=>y(s)},[t("img",{src:o.$filters.prefix(s.goodsCoverImg)},null,8,H),t("div",K,[t("p",W,g(s.goodsName),1),t("span",J,"￥ "+g(s.sellingPrice),1)])],8,G))),128)):(c(),d("img",X))]),_:1},8,["loading","finished","finished-text"])]),_:1},8,["modelValue"])])])}}},ne=P(Z,[["__scopeId","data-v-90ec2e09"]]);export{ne as default};
